@model escupe.Models.Candidato
@{
    Layout = null;
    var cpfMascarado = Model.CPF.Substring(0, 3) + ".***.***-" + Model.CPF.Substring(Model.CPF.Length - 2);
}
@section Styles {
    <link rel="stylesheet" href="~/css/editar.css" asp-append-version="true" />
}

<header class="site-header">
    <a href="@Url.Action("FeedVaga", "Feed")" class="icone-container">
        <img src="~/imagens/icone.png" alt="Logo do Site" class="site-logo" />
        <span class="site-nome">Esculp</span>
    </a>
</header>

<div class="container">
    <h1>Perfil do Candidato</h1>
    <form asp-action="AtualizarPerfil" method="post" class="formulario">
        <section>
            <h2>Dados Pessoais</h2>
            <label for="nome">Nome Completo</label>
            <input type="text" id="nome" name="Nome" value="@Model.NomeCompleto" required />

            <label for="dataNascimento">Data de nascimento:</label>
            <input type="date" id="dataNascimento" name="DataNascimento" value="@(Model.DataNascimento.HasValue ? Model.DataNascimento.Value.ToString("yyyy-MM-dd") : "")" required />


            <label for="cpf">CPF:</label>
           <input type="text" id="cpf" name="CPF" value="@cpfMascarado" readonly />
            <label for="telefone">Telefone:</label>
            <input type="tel" id="telefone" name="Telefone" value="@Model.Telefone" required />
        </section>

        <section>
            <h2>Endereço</h2>
            <label for="bairro">Bairro</label>
            <input type="text" id="bairro" name="Bairro" value="@Model.Endereco.Bairro" />

            <label for="rua">Rua:</label>
            <input type="text" id="rua" name="Rua" value="@Model.Endereco.Logradouro" required />

            <label for="numero">Número:</label>
            <input type="text" id="numero" name="Numero" value="@Model.Endereco.Numero" required />

            <label for="cidade">Cidade:</label>
            <input type="text" id="cidade" name="Cidade" value="@Model.Endereco.Complemento" required />

            <label for="estado">Estado:</label>
            <input type="text" id="estado" name="Estado" value="@Model.Endereco.UF" required />
        </section>

        <section>
            <h2>Conta</h2>
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="Email" value="@Model.Email" required />

            <label for="senha">Senha:</label>
            <input type="password" id="senha" name="Senha" value="@Model.Senha" required />
        </section>

        <button type="submit">Salvar Alterações</button>
        <div id="mensagem-sucesso" class="mensagem-sucesso oculto">
            ✔ Perfil editado com sucesso!
        </div>
    </form>
</div>

@section Scripts {
    <script>
        const formulario = document.querySelector('.formulario');
        const mensagem = document.getElementById('mensagem-sucesso');

        formulario.addEventListener('submit', function(event) {
            event.preventDefault();
            mensagem.classList.add('mostrar');
            setTimeout(() => {
                mensagem.classList.remove('mostrar');
            }, 3000);
        });
    </script>
}
